---
## Author
author:
  name: Оразгелдиев Язгелди
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032225075@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: "Отчет по лабораторной работе №6"
subtitle: "Моделирование сетей передачи данных"
license: "CC BY"
---

# Цель работы

Основной целью работы является знакомство с принципами работы дисциплины очереди Token Bucket Filter, которая формирует входящий/исходящий трафик для ограничения пропускной способности, а также получение навыков моделирования и исследования поведения трафика посредством проведения интерактивного и воспроизводимого экспериментов в Mininet.

# Задание

1. Задайте топологию (рис. 6.3), состоящую из двух хостов и двух коммутаторов с назначенной по умолчанию mininet сетью 10.0.0.0/8.

2. Проведите интерактивные эксперименты по ограничению пропускной способности сети с помощью TBF в эмулируемой глобальной сети.

3. Самостоятельно реализуйте воспроизводимые эксперимент по применению TBF для ограничения пропускной способности. Постройте соответствующие графики.


# Выполнение лабораторной работы

1. Запустил виртуальную среду с mininet. Из основной ОС подключился к виртуальной машине. В виртуальной машине mininet исправил права запуска X-соединения. Скопировала значение куки своего пользователя mininet в файл для пользователя root.

![*Изменение права запуска X-соединения*](/image/1.jpg){#fig:001 width=70%}

2. Задал топологию сети, состоящую из двух хостов и двух коммутаторов с назначенной по умолчанию mininet сетью 10.0.0.0/8.

![*Создание топологии*](/image/2.jpg){#fig:002 width=70%}

3. На хостах h1, h2 и на коммутаторах s1, s2 ввел команду ifconfig, чтобы отобразить информацию, относящуюся к их сетевым интерфейсам и назначенным им IP-адресам.

![*Команда ifconfig на хосте h1*](/image/3.jpg){#fig:003 width=70%}

![*Команда ifconfig на хосте h2*](/image/4.jpg){#fig:004 width=70%}

![*Команда ifconfig на коммутаторе s1*](/image/5.jpg){#fig:005 width=70%}

![*Команда ifconfig на коммутаторе s2*](/image/6.jpg){#fig:006 width=70%}

4. Проверил подключение между хостами h1 и h2 с помощью команды ping с параметром -c 4.

![*Пингование*](/image/7.jpg){#fig:007 width=70%}

5. В терминале хоста h2 запустил iPerf3 в режиме сервера.

![*Запуск сервера iPerf3*](/image/8.jpg){#fig:008 width=70%}

6. В терминале хоста h1 запустила iPerf3 в режиме клиента.

![*Запуск клиента iPerf3*](/image/9.jpg){#fig:009 width=70%}

7. Изменил пропускную способность хоста h1, установив пропускную способность на 10 Гбит/с на интерфейсе h1-eth0 и параметры TBF-фильтра. 

![*Изменение пропускной способности на хосте*](/image/10.jpg){#fig:010 width=70%}

8. Фильтр tbf требует установки значения всплеска при ограничении скорости. Это значение должно быть достаточно высоким, чтобы обеспечить установленную скорость. Она должна быть не ниже указанной частоты, делённой на
HZ, где HZ — тактовая частота, настроенная как параметр ядра, и может быть извлечена с помощью следующей команды.

![*Извлечение тактовой частоты*](/image/11.jpg){#fig:011 width=70%}

9. В терминале хоста h2 запустила iPerf3 в режиме сервера.

![*Запуск сервера iPerf3*](/image/12.jpg){#fig:012 width=70%}

10. В терминале хоста h1 запустила iPerf3 в режиме клиента.

![*Запуск клиента iPerf3*](/image/13.jpg){#fig:013 width=70%}

11. Удалил модифицированную конфигурацию на хосте h1.

![*Удаление модифицированной конфигурации*](/image/14.jpg){#fig:014 width=70%}

12. Применил правило ограничения скорости tbf с параметрами rate = 10gbit, burst = 5,000,000, limit= 15,000,000 к интерфейсу s1-eth2 коммутатора s1, который соединяет его с коммутатором s2.

![*Изменение пропускной способности на коммутаторе*](/image/15.jpg){#fig:015 width=70%}

13. В терминале хоста h2 запустил iPerf3 в режиме сервера.

![*Запуск сервера iPerf3*](/image/16.jpg){#fig:016 width=70%}

14. В терминале хоста h2 запустил iPerf3 в режиме клиента.

![*Запуск клиента iPerf3*](/image/17.jpg){#fig:017 width=70%}

15. Удалил модифицированную конфигурацию на коммутаторе s1.

![*Удаление модифицированной конфигурации*](/image/18.jpg){#fig:018 width=70%}

16. Объединил NETEM и TBF, введя на интерфейсе s1-eth2 коммутатора s1 задержку, джиттер, повреждение пакетов и указав скорость.

![*Изменение задержки на коммутаторе*](/image/19.jpg){#fig:019 width=70%}

17. Убедился, что соединение от хоста h1 к хосту h2 имеет заданную задержку. Для этого запустите команду ping с параметром -c 4 с терминала хоста h1. 

![*Пингование*](/image/20.jpg){#fig:020 width=70%}

18. Добавил второе правило на коммутаторе s1, которое задаёт ограничение скорости с помощью tbf с параметрами rate=2gbit, burst=1,000,000, limit=2,000,000.

![*Изменение пропускной способности на коммутаторе*](/image/21.jpg){#fig:021 width=70%}

19. В терминале хоста h2 запустил iPerf3 в режиме сервера.

![*Запуск сервера iPerf3*](/image/22.jpg){#fig:022 width=70%}

20. В терминале хоста h2 запустила iPerf3 в режиме клиента.

![*Запуск клиента iPerf3*](/image/23.jpg){#fig:023 width=70%}

21. Удалил модифицированную конфигурацию на коммутаторе s1.

![*Удаление модифицированной конфигурации*](/image/24.jpg){#fig:024 width=70%}

22. Самостоятельно реализовал воспроизводимые эксперименты по использованию TBF для ограничения скорости на конечных хостах. Построил соответствующие графики.

![*Файл lab_tbf.py*](/image/25.jpg){#fig:025 width=70%}

![*Файл ping-plot*](/image/26.jpg){#fig:026 width=70%}

![*Makefile*](/image/27.jpg){#fig:027 width=70%}

![*Запуск эксперимента*](/image/28.jpg){#fig:028 width=70%}

![*График пропускной способности*](/image/29.jpg){#fig:029 width=70%}

23. Самостоятельно реализовал воспроизводимые эксперименты по использованию TBF для ограничения скорости на коммутаторах. Построил соответствующие графики.

![*Изменение файла lab_tbf.py*](/image/30.jpg){#fig:030 width=70%}

![*Запуск эксперимента*](/image/31.jpg){#fig:031 width=70%}

![*График пропускной способности*](/image/32.jpg){#fig:032 width=70%}

24. Самостоятельно реализовал воспроизводимые эксперименты по объединению NETEM и TBF. Построил соответствующие
графики.

![*Изменение файла lab_tbf.py*](/image/33.jpg){#fig:033 width=70%}

![*Запуск эксперимента*](/image/34.jpg){#fig:034 width=70%}

![*График пропускной способности*](/image/35.jpg){#fig:035 width=70%}


# Выводы

Я ознакомился с принципами работы дисциплины очереди Token Bucket Filter, а также получил навыки моделирования и исследования поведения трафика посредством проведения интерактивного и воспроизводимого экспериментов в Mininet.

