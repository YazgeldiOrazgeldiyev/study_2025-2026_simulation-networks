---
## Author
author:
  name: Оразгелдиев Язгелди
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032225075@pfur.ru

## Title
title: "Лабораторная работа № 3"
subtitle: "Измерение и тестирование пропускной способности сети. Воспроизводимый эксперимент"
license: "CC BY"
---

# Цель работы

Основной целью работы является знакомство с инструментом для измерения пропускной способности сети в режиме реального времени — iPerf3, а также получение навыков проведения воспроизводимого эксперимента по измерению пропускной способности моделируемой сети в среде Mininet.

# Задание

1. Воспроизвести посредством API Mininet эксперименты по измерению пропускной способности с помощью iPerf3.
2. Построить графики по проведённому эксперименту.

# Выполнение лабораторной работы

С помощью API Mininet создали простейшую топологию сети, состоящую из двух хостов и коммутатора с назначенной по умолчанию mininet сетью 10.0.0.0/8. Для этого каталоге /work/lab_iperf3 для работы над проектом создали подкаталог lab_iperf3_topo и скопировал в него файл с примером скрипта
mininet/examples/emptynet.py, описывающего стандартную простую топологию сети mininet

![Создание каталога и копирование файла](image/1.jpg){#fig-001 width=70%}

Изучил содержимое скрипта

![Скрипт lab_iperf3_topo](image/2.jpg){#fig-002 width=70%}

Запустили скрипт создания топологии lab_iperf3_topo.py

![Запуск скрипта](image/3.jpg){#fig-003 width=70%}

После отработки скрипта посмотрели элементы топологии и завершили работу

![Элементы топологии](image/4.jpg){#fig-004 width=70%}

Внес в скрипт lab_iperf3_topo.py изменение, позволяющее вывести на экран информацию о хосте h1, а именно имя хоста, его IP-адрес, MAC-адрес.

![Запуск скрипта](image/5.jpg){#fig-005 width=70%}

Изменили скрипт так чтоб на экран выводилась информация о хосте 1 и 2

![Внесение изменений](image/6.jpg){#fig-006 width=70%}

![Запуск скрипта](image/7.jpg){#fig-007 width=70%}

Добавили в скрипт настройки параметров производительности. Для этого сделали копию скрипта lab_iperf3_topo.py 

![Внесение изменений в скрипт](image/8.jpg){#fig-008 width=70%}

В начале скрипта lab_iperf3_topo2 добавил записи об импорте классов CPULimitedHost и TCLink

![Внесение изменений в скрипт](image/9.jpg){#fig-009 width=70%}

В скрипте lab_iperf3_topo2 изменили строку описания сети указав использование ограничения производительности и изоляции.

![Внесение изменений в скрипт](image/10.jpg){#fig-010 width=70%}

В скрипте lab_iperf3_topo2 изменили функцию задания параметров виртуального хоста h1, указав, что ему будет выделено 50% от общих ресурсов процессора системы. Аналогичным образом для хоста h2 задали долю выделения ресурсов процессора 45%

![Внесение изменений в скрипт](image/11.jpg){#fig-011 width=70%}

В скрипте lab_iperf3_topo2 изменили функцию параметров соединения между хостом h1 и коммутатором s3

![Внесение изменений в скрипт](image/12.jpg){#fig-012 width=70%}

Запустили на отработку сначала скрипт lab_iperf3_topo2 затем lab_iperf3_topo и сравнили результаты

![Запуск скрипта](image/13.jpg){#fig-013 width=70%}

![Запуск скрипта](image/14.jpg){#fig-014 width=70%}
 
Построили графики и по проводимому эксперименту. для этого сделали копию  скрипта lab_iperf3_topo2.py и поместили его в подкаталог iperf

![Создание подкаталога и копирование скрипта](image/15.jpg){#fig-015 width=70%}

В начале скрипта lab_iperf3.py добавили запись

![Внесение изменений в скрипт](image/16.jpg){#fig-016 width=70%}

Изменили код в скрипте lab_iperf3.py так чтобы
– на хостах не было ограничения по использованию ресурсов процессора;
– каналы между хостами и коммутатором были по 100 Мбит/с с задержкой 75 мс, без потерь, без использования ограничителей пропускной
способности и максимального размера очереди.

![Внесение изменений в скрипт](image/17.jpg){#fig-017 width=70%}

После функции старта сети описали запуск на хосте h2 сервера iPerf3, а на хосте h1 запуск с задержкой в 10 секунд клиента iPerf3 с экспортом результатов в JSON-файл, закомментировали строки, отвечающие за запуск CLI-интерфейса

![Внесение изменений в скрипт](image/18.jpg){#fig-018 width=70%}

Запустили на отработку скрипт lab_iperf3.py 

![Запуск скрипта](image/19.jpg){#fig-019 width=70%}

Создали графики из получившегося JSON-файла:

![Построение графика](image/20.jpg){#fig-020 width=70%}

Создали Makefile для проведения всего эксперимента. В Makefile прописали запуск скрипта эксперимента, построение графиков и очистку каталога от результатов

![Написание скрипта Makefile](image/21.jpg){#fig-021 width=70%}

Проверили корректность работы скрипта

![Работа скрипта Makefile](image/22.jpg){#fig-022 width=70%}

Завершили соединение с виртуальной машиной и выключили ее

# Выводы

Я ознакомился с инструментом для измерения пропускной способности сети в режиме реального времени — iPerf3, а также получил навыки проведения воспроизводимого эксперимента по измерению пропускной способности моделируемой сети в среде Mininet.
